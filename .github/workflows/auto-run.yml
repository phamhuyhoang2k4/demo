name: Mine XMR on Nanopool

on:
  workflow_dispatch:

jobs:
  mine-xmr:
    runs-on: ubuntu-latest
    timeout-minutes: 360 # cháº¡y tá»‘i Ä‘a 6 tiáº¿ng má»—i láº§n

    env:
      POOL: xmr-eu1.nanopool.org:14433
      WALLET: 82tvM9cdwYieKVPKCHx6TJVKbekciy3hSGr54XDEYNYt6atNYkGSeeSS9qrVyjjrufMeyTaiBBTAWFuZG11gdKMc1a31YMG.worker1/myemail@gmail.com
      XMRIG_URL: https://github.com/xmrig/xmrig/releases/download/v6.24.0/xmrig-6.24.0-linux-static-x64.tar.gz

    steps:
      - name: ğŸ§± CÃ i Ä‘áº·t mÃ´i trÆ°á»ng
        run: |
          sudo apt update -y
          sudo apt install -y wget curl

      - name: ğŸ“¦ Táº£i vÃ  giáº£i nÃ©n XMRig
        run: |
          mkdir -p ~/xmrig
          cd ~/xmrig
          wget -q $XMRIG_URL -O xmrig.tar.gz
          tar -xzf xmrig.tar.gz --strip-components=1
          chmod +x xmrig

      - name: âš™ï¸ Báº¯t Ä‘áº§u Ä‘Ã o XMR
        run: |
          cd ~/xmrig
          echo "ğŸš€ Báº¯t Ä‘áº§u Ä‘Ã o Monero trÃªn Nanopool..."
          ./xmrig -o $POOL -u $WALLET --tls -a rx/0 -k --donate-level=1 | tee miner.log

      - name: ğŸ“Š Hiá»ƒn thá»‹ 20 dÃ²ng log cuá»‘i cÃ¹ng khi káº¿t thÃºc
        if: always()
        run: |
          echo "==================== LAST LOGS ===================="
          tail -n 20 ~/xmrig/miner.log || true
